(()=>{"use strict";function e(e){const t={};for(let n=0;n<e.daily.length;n+=1)t[n]={high:e.daily[n].temp.max,low:e.daily[n].temp.min,weather:e.daily[n].weather[0].main,weather_id:e.daily[n].weather[0].id};return t}function t(e){const t={};for(let n=0;n<e.hourly.length;n+=1)t[n]={temp:e.hourly[n].temp,weather_id:e.hourly[n].weather[0].id};return t}!function(){const n=document.getElementById("content"),i=document.createElement("div");i.setAttribute("id","top_bar"),n.appendChild(i);const o=document.createElement("input");o.setAttribute("id","location_input"),i.appendChild(o);const d=document.createElement("button");d.setAttribute("id","submit_button"),d.innerHTML="Submit",d.addEventListener("click",(()=>{!function(){const e=document.getElementById("content");for(;e.childNodes.length>1;)e.removeChild(e.lastChild)}(),async function(){try{const n=document.getElementById("location_input"),i=await async function(n){try{const i=await fetch("https://nominatim.openstreetmap.org/?addressdetails=1&q="+n+"&format=json&limit=1",{mode:"cors"}),o=await i.json(),[d,c,r]=[o[0].lat,o[0].lon,o[0].display_name],a=await fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+d+"&lon="+c+"&exclude=minutely&appid=f28c637b536fd0079c1b9e884e3468f3",{mode:"cors"}),l=await a.json(),m={location:r,current:{temp:l.current.temp,feels_like:l.current.feels_like,humidity:l.current.humidity,todays_high:l.daily[0].temp.max,todays_low:l.daily[0].temp.min,description:l.current.weather[0].description,icon:l.current.weather[0].icon},daily:e(l),hourly:t(l)};return console.log(m),m}catch(e){}}(n.value);n.value=i.location,function(e){const t=document.createElement("div");t.setAttribute("id","current_forecast_container"),document.getElementById("content").appendChild(t);const n=document.createElement("img");n.src="http://openweathermap.org/img/wn/"+e.icon+"@2x.png",n.setAttribute("id","weather_icon"),t.appendChild(n);const i=document.createElement("div");i.setAttribute("id","current_temperature_container"),t.appendChild(i);const o=document.createElement("div");o.innerHTML=e.temp,o.setAttribute("id","current_temp"),i.appendChild(o);const d=document.createElement("div");d.innerHTML="Feels like:\n"+e.feels_like,d.setAttribute("id","feels_like"),i.appendChild(d);const c=document.createElement("div");c.innerHTML="Humidity:\n"+e.humidity,c.setAttribute("id","humidity"),i.appendChild(c);const r=document.createElement("div");r.setAttribute("id","high_low_container"),t.appendChild(r);const a=document.createElement("div");a.innerHTML="H: "+e.todays_high,i.appendChild(a);const l=document.createElement("div");l.innerHTML="L: "+e.todays_low,i.appendChild(l)}(i.current)}catch(e){console.log(e)}}()})),i.appendChild(d)}()})();