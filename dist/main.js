(()=>{"use strict";function e(e,t){return{temp:t(e.current.temp),feels_like:t(e.current.feels_like),humidity:e.current.humidity,high:t(e.daily[0].temp.max),low:t(e.daily[0].temp.min),icon:e.current.weather[0].icon}}function t(e,t){const n={timezone_offset:e.timezone_offset};for(let i=0;i<e.daily.length;i+=1)n[i]={high:t(e.daily[i].temp.max),low:t(e.daily[i].temp.min),icon:e.daily[i].weather[0].icon,time:e.daily[i].dt,chance_of_rain:e.daily[i].pop};return n}function n(e,t){const n={timezone_offset:e.timezone_offset};for(let i=0;i<e.hourly.length;i+=1)n[i]={time:e.hourly[i].dt,temp:t(e.hourly[i].temp),icon:e.hourly[i].weather[0].icon,chance_of_rain:e.hourly[i].pop};return n}const i=config.OpenWeatherMapApiKey;async function o(o){try{const a=function(){const e=document.createElement("div");return e.setAttribute("class","loader"),document.getElementById("content").appendChild(e),e}(),d=document.getElementById("location_input"),l=await async function(i,o,c){try{const a=await fetch("https://nominatim.openstreetmap.org/?addressdetails=1&q="+i+"&format=json&limit=1",{mode:"cors"}),d=await a.json(),[l,r,s]=[d[0].lat,d[0].lon,d[0].display_name],m=await fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+l+"&lon="+r+"&exclude=minutely&appid="+c,{mode:"cors"}),u=await m.json();return{location:s,current:e(u,o),daily:t(u,o),hourly:n(u,o)}}catch(e){alert("Check your spelling!")}}(d.value,o,i);d.value=l.location,c=l.location,localStorage.setItem("location",c),function(e){const t=document.createElement("div");t.setAttribute("id","todays_forecast_container"),document.getElementById("content").appendChild(t);const n=document.createElement("div");n.setAttribute("id","todays_temperature_container"),t.appendChild(n);const i=document.createElement("img");i.src="http://openweathermap.org/img/wn/"+e.icon+"@2x.png",i.setAttribute("id","todays_weather_icon"),t.appendChild(i);const o=document.createElement("div");o.innerHTML=e.temp+"°",o.setAttribute("id","current_temp"),n.appendChild(o);const c=document.createElement("div");c.innerHTML="Feels like:\n"+e.feels_like+"°",c.setAttribute("id","feels_like"),n.appendChild(c);const a=document.createElement("div");a.innerHTML="Humidity:\n"+e.humidity+"%",a.setAttribute("id","humidity"),n.appendChild(a);const d=document.createElement("div");d.setAttribute("id","todays_high"),d.innerHTML="H: "+e.high+"°",n.appendChild(d);const l=document.createElement("div");l.setAttribute("id","todays_low"),l.innerHTML="L: "+e.low+"°",n.appendChild(l)}(l.current),function(e){const t=document.createElement("div");t.setAttribute("id","hourly_forecast_container"),document.getElementById("content").appendChild(t),function(e,t){for(let n=0;n<25;n+=1){const i=document.createElement("div");i.setAttribute("class","hourly_forecast"),t.appendChild(i);const o=document.createElement("div");o.innerHTML=(e[n].time+e.timezone_offset)/3600%24,o.setAttribute("class","hour"),i.appendChild(o);const c=document.createElement("img");c.src="http://openweathermap.org/img/wn/"+e[n].icon+"@2x.png",c.setAttribute("class","hourly_icon"),i.appendChild(c);const a=document.createElement("div");if(a.innerHTML=e[n].temp+"°",a.setAttribute("class","hourly_temp"),i.appendChild(a),e[n].chance_of_rain>0){const t=document.createElement("div");t.innerHTML=Math.round(100*e[n].chance_of_rain)+"%",t.setAttribute("class","hourly_chance_of_rain"),i.appendChild(t)}}}(e,t)}(l.hourly),function(e){const t=document.createElement("div");t.setAttribute("id","daily_forecast_container"),document.getElementById("content").appendChild(t),function(e,t){for(let o=1;o<8;o+=1){const c=document.createElement("div");c.setAttribute("class","day_container"),t.appendChild(c);const a=document.createElement("div");a.setAttribute("class","day_name"),a.innerHTML=(n=e[o].time,i=e.timezone_offset,new Date(1e3*n+1e3*i).toLocaleString("en-US",{weekday:"long"})),c.appendChild(a);const d=document.createElement("img");d.src="http://openweathermap.org/img/wn/"+e[o].icon+"@2x.png",d.setAttribute("class","daily_weather_icon"),c.appendChild(d);const l=document.createElement("div");l.setAttribute("class","max_temp"),l.innerHTML="H: "+e[o].high+"°",c.appendChild(l);const r=document.createElement("div");if(r.setAttribute("class","min_temp"),r.innerHTML="L: "+e[o].low+"°",c.appendChild(r),e[o].chance_of_rain>0){const t=document.createElement("div");t.setAttribute("class","daily_precip_prob"),t.innerHTML=Math.round(100*e[o].chance_of_rain)+"%",c.appendChild(t)}}var n,i}(e,t)}(l.daily),a.remove()}catch(e){document.getElementsByClassName("loader")[0].remove()}var c}function c(e,t,n){"F"===e?(t.style.opacity=1,n.style.opacity=.4):(n.style.opacity=1,t.style.opacity=.4)}function a(){const e=document.getElementById("content");for(;e.childNodes.length>1;)e.removeChild(e.lastChild)}function d(e){localStorage.setItem("scale",e)}function l(e){return Math.round(1.8*(e-273.15)+32)}function r(e){return Math.round(e-273.15)}!function(){const e=document.getElementById("content"),t=document.createElement("div");t.setAttribute("id","top_bar"),e.appendChild(t);const n=document.createElement("input");n.setAttribute("id","location_input");const i=document.createElement("button");i.setAttribute("id","submit_button"),i.innerHTML="Submit",i.addEventListener("click",(()=>{a(),"F"===localStorage.getItem("scale")?o(l):o(r)}));const s=document.createElement("button");s.setAttribute("id","fahrenheit"),s.innerHTML="F";const m=document.createElement("button");m.setAttribute("id","celsius"),m.innerHTML="C",s.addEventListener("click",(()=>{d("F"),c("F",s,m),""!==n.value&&(a(),o(l))})),m.addEventListener("click",(()=>{d("C"),c("C",s,m),""!==n.value&&(a(),o(r))})),t.appendChild(m),t.appendChild(s),t.appendChild(i),t.appendChild(n)}(),function(){const e=document.getElementById("location_input"),t=localStorage.getItem("location");let n=localStorage.getItem("scale");null==n&&(n="F",d(n)),c(n,document.getElementById("fahrenheit"),document.getElementById("celsius")),null!=t?(e.value=t,o("F"===n?l:r)):e.placeholder="Enter location here"}()})();