(()=>{"use strict";function e(e){const t={timezone_offset:e.timezone_offset};for(let n=0;n<e.daily.length;n+=1)t[n]={high:e.daily[n].temp.max,low:e.daily[n].temp.min,icon:e.daily[n].weather[0].icon,time:e.daily[n].dt};return t}function t(e){const t={timezone_offset:e.timezone_offset};for(let n=0;n<e.hourly.length;n+=1)t[n]={time:e.hourly[n].dt,temp:e.hourly[n].temp,icon:e.hourly[n].weather[0].icon,precipitation_prob:e.hourly[n].pop};return t}async function n(){try{const n=document.getElementById("location_input"),i=await async function(n){try{const i=await fetch("https://nominatim.openstreetmap.org/?addressdetails=1&q="+n+"&format=json&limit=1",{mode:"cors"}),o=await i.json(),[c,d,a]=[o[0].lat,o[0].lon,o[0].display_name],r=await fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+c+"&lon="+d+"&exclude=minutely&appid=f28c637b536fd0079c1b9e884e3468f3",{mode:"cors"}),l=await r.json();return{location:a,current:{temp:l.current.temp,feels_like:l.current.feels_like,humidity:l.current.humidity,todays_high:l.daily[0].temp.max,todays_low:l.daily[0].temp.min,description:l.current.weather[0].description,icon:l.current.weather[0].icon},daily:e(l),hourly:t(l)}}catch(e){}}(n.value);n.value=i.location,function(e){const t=document.createElement("div");t.setAttribute("id","current_forecast_container"),document.getElementById("content").appendChild(t);const n=document.createElement("img");n.src="http://openweathermap.org/img/wn/"+e.icon+"@2x.png",n.setAttribute("id","weather_icon"),t.appendChild(n);const i=document.createElement("div");i.setAttribute("id","current_temperature_container"),t.appendChild(i);const o=document.createElement("div");o.innerHTML=e.temp+"°",o.setAttribute("id","current_temp"),i.appendChild(o);const c=document.createElement("div");c.innerHTML="Feels like:\n"+e.feels_like+"°",c.setAttribute("id","feels_like"),i.appendChild(c);const d=document.createElement("div");d.innerHTML="Humidity:\n"+e.humidity,d.setAttribute("id","humidity"),i.appendChild(d);const a=document.createElement("div");a.setAttribute("id","high_low_container"),t.appendChild(a);const r=document.createElement("div");r.innerHTML="H: "+e.todays_high+"°",i.appendChild(r);const l=document.createElement("div");l.innerHTML="L: "+e.todays_low+"°",i.appendChild(l)}(i.current),function(e){const t=document.createElement("div");t.setAttribute("id","hourly_forecast_container"),document.getElementById("content").appendChild(t),function(e,t){for(let n=0;n<25;n+=1){const i=document.createElement("div");i.setAttribute("class","hourly_forecast"),t.appendChild(i);const o=document.createElement("div");if(o.innerHTML=(e[n].time+e.timezone_offset)/3600%24,o.setAttribute("class","hour"),i.appendChild(o),e[n].precipitation_prob>0){const t=document.createElement("div");t.innerHTML=Math.round(100*e[n].precipitation_prob)+"%",t.setAttribute("class","prob_of_rain"),i.appendChild(t)}const c=document.createElement("img");c.src="http://openweathermap.org/img/wn/"+e[n].icon+"@2x.png",c.setAttribute("class","hourly_icon"),i.appendChild(c);const d=document.createElement("div");d.innerHTML=e[n].temp+"°",d.setAttribute("class","hourly_temp"),i.appendChild(d)}}(e,t)}(i.hourly),function(e){const t=document.createElement("div");t.setAttribute("id","daily_forecast_container"),document.getElementById("content").appendChild(t),function(e,t){for(let o=1;o<8;o+=1){const c=document.createElement("div");c.setAttribute("class","day_container"),t.appendChild(c);const d=document.createElement("div");d.setAttribute("class","day_name"),d.innerHTML=(n=e[o].time,i=e.timezone_offset,new Date(1e3*n+1e3*i).toLocaleString("en-US",{weekday:"long"})),c.appendChild(d);const a=document.createElement("img");a.src="http://openweathermap.org/img/wn/"+e[o].icon+"@2x.png",a.setAttribute("class","daily_weather_icon"),c.appendChild(a);const r=document.createElement("div");r.setAttribute("class","max_temp"),r.innerHTML=e[o].high+"°",c.appendChild(r);const l=document.createElement("div");l.setAttribute("class","min_temp"),l.innerHTML=e[o].low+"°",c.appendChild(l)}var n,i}(e,t)}(i.daily)}catch(e){console.log(e)}}!function(){const e=document.getElementById("content"),t=document.createElement("div");t.setAttribute("id","top_bar"),e.appendChild(t);const i=document.createElement("input");i.setAttribute("id","location_input"),t.appendChild(i);const o=document.createElement("button");o.setAttribute("id","submit_button"),o.innerHTML="Submit",o.addEventListener("click",(()=>{var e;e=i.value,localStorage.setItem("location",e),function(){const e=document.getElementById("content");for(;e.childNodes.length>1;)e.removeChild(e.lastChild)}(),n()})),t.appendChild(o)}(),function(){const e=localStorage.getItem("location");null!=e&&(document.getElementById("location_input").value=e,n())}()})();