(()=>{"use strict";function t(t){const e={timezone_offset:t.timezone_offset};for(let n=0;n<t.daily.length;n+=1)e[n]={high:t.daily[n].temp.max,low:t.daily[n].temp.min,icon:t.daily[n].weather[0].icon,time:t.daily[n].dt};return e}function e(t){const e={timezone_offset:t.timezone_offset};for(let n=0;n<t.hourly.length;n+=1)e[n]={time:t.hourly[n].dt,temp:t.hourly[n].temp,icon:t.hourly[n].weather[0].icon,precipitation_prob:t.hourly[n].pop};return e}async function n(){try{const n=document.getElementById("location_input"),i=await async function(n){try{const i=await fetch("https://nominatim.openstreetmap.org/?addressdetails=1&q="+n+"&format=json&limit=1",{mode:"cors"}),o=await i.json(),[c,d,a]=[o[0].lat,o[0].lon,o[0].display_name],r=await fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+c+"&lon="+d+"&exclude=minutely&appid=f28c637b536fd0079c1b9e884e3468f3",{mode:"cors"}),l=await r.json();return{location:a,current:{temp:l.current.temp,feels_like:l.current.feels_like,humidity:l.current.humidity,todays_high:l.daily[0].temp.max,todays_low:l.daily[0].temp.min,description:l.current.weather[0].description,icon:l.current.weather[0].icon},daily:t(l),hourly:e(l)}}catch(t){}}(n.value);n.value=i.location,function(t){const e=document.createElement("div");e.setAttribute("id","current_forecast_container"),document.getElementById("content").appendChild(e);const n=document.createElement("div");n.setAttribute("id","current_temperature_container"),e.appendChild(n);const i=document.createElement("img");i.src="http://openweathermap.org/img/wn/"+t.icon+"@2x.png",i.setAttribute("id","weather_icon"),e.appendChild(i);const o=document.createElement("div");o.innerHTML=t.temp+"°",o.setAttribute("id","current_temp"),n.appendChild(o);const c=document.createElement("div");c.innerHTML="Feels like:\n"+t.feels_like+"°",c.setAttribute("id","feels_like"),n.appendChild(c);const d=document.createElement("div");d.innerHTML="Humidity:\n"+t.humidity+"%",d.setAttribute("id","humidity"),n.appendChild(d);const a=document.createElement("div");a.setAttribute("id","high_low_container"),e.appendChild(a);const r=document.createElement("div");r.setAttribute("id","todays_high"),r.innerHTML="H: "+t.todays_high+"°",n.appendChild(r);const l=document.createElement("div");l.setAttribute("id","todays_low"),l.innerHTML="L: "+t.todays_low+"°",n.appendChild(l)}(i.current),function(t){const e=document.createElement("div");e.setAttribute("id","hourly_forecast_container"),document.getElementById("content").appendChild(e),function(t,e){for(let n=0;n<25;n+=1){const i=document.createElement("div");i.setAttribute("class","hourly_forecast"),e.appendChild(i);const o=document.createElement("div");if(o.innerHTML=(t[n].time+t.timezone_offset)/3600%24,o.setAttribute("class","hour"),i.appendChild(o),t[n].precipitation_prob>0){const e=document.createElement("div");e.innerHTML=Math.round(100*t[n].precipitation_prob)+"%",e.setAttribute("class","prob_of_rain"),i.appendChild(e)}const c=document.createElement("img");c.src="http://openweathermap.org/img/wn/"+t[n].icon+"@2x.png",c.setAttribute("class","hourly_icon"),i.appendChild(c);const d=document.createElement("div");d.innerHTML=t[n].temp+"°",d.setAttribute("class","hourly_temp"),i.appendChild(d)}}(t,e)}(i.hourly),function(t){const e=document.createElement("div");e.setAttribute("id","daily_forecast_container"),document.getElementById("content").appendChild(e),function(t,e){for(let o=1;o<8;o+=1){const c=document.createElement("div");c.setAttribute("class","day_container"),e.appendChild(c);const d=document.createElement("div");d.setAttribute("class","day_name"),d.innerHTML=(n=t[o].time,i=t.timezone_offset,new Date(1e3*n+1e3*i).toLocaleString("en-US",{weekday:"long"})),c.appendChild(d);const a=document.createElement("img");a.src="http://openweathermap.org/img/wn/"+t[o].icon+"@2x.png",a.setAttribute("class","daily_weather_icon"),c.appendChild(a);const r=document.createElement("div");r.setAttribute("class","max_temp"),r.innerHTML=t[o].high+"°",c.appendChild(r);const l=document.createElement("div");l.setAttribute("class","min_temp"),l.innerHTML=t[o].low+"°",c.appendChild(l)}var n,i}(t,e)}(i.daily)}catch(t){console.log(t)}}!function(){const t=document.getElementById("content"),e=document.createElement("div");e.setAttribute("id","top_bar"),t.appendChild(e);const i=document.createElement("input");i.setAttribute("id","location_input");const o=document.createElement("button");o.setAttribute("id","submit_button"),o.innerHTML="Submit",o.addEventListener("click",(()=>{var t;t=i.value,localStorage.setItem("location",t),function(){const t=document.getElementById("content");for(;t.childNodes.length>1;)t.removeChild(t.lastChild)}(),n()})),e.appendChild(o),e.appendChild(i)}(),function(){const t=localStorage.getItem("location");null!=t&&(document.getElementById("location_input").value=t,n())}()})();