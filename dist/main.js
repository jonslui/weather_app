(()=>{"use strict";function e(e,t){return{temp:t(e.current.temp),feels_like:t(e.current.feels_like),humidity:e.current.humidity,high:t(e.daily[0].temp.max),low:t(e.daily[0].temp.min),icon:e.current.weather[0].icon}}function t(e,t){const n={timezone_offset:e.timezone_offset};for(let i=0;i<e.daily.length;i+=1)n[i]={high:t(e.daily[i].temp.max),low:t(e.daily[i].temp.min),icon:e.daily[i].weather[0].icon,time:e.daily[i].dt,chance_of_rain:e.daily[i].pop};return n}function n(e,t){const n={timezone_offset:e.timezone_offset};for(let i=0;i<e.hourly.length;i+=1)n[i]={time:e.hourly[i].dt,temp:t(e.hourly[i].temp),icon:e.hourly[i].weather[0].icon,chance_of_rain:e.hourly[i].pop};return n}async function i(i){try{const c=document.getElementById("location_input"),a=await async function(i,o){try{const c=await fetch("https://nominatim.openstreetmap.org/?addressdetails=1&q="+i+"&format=json&limit=1",{mode:"cors"}),a=await c.json(),[d,l,r]=[a[0].lat,a[0].lon,a[0].display_name],s=await fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+d+"&lon="+l+"&exclude=minutely&appid=f28c637b536fd0079c1b9e884e3468f3",{mode:"cors"}),u=await s.json();return{location:r,current:e(u,o),daily:t(u,o),hourly:n(u,o)}}catch(e){alert("Check your spelling!")}}(c.value,i);c.value=a.location,o=a.location,localStorage.setItem("location",o),function(e){const t=document.createElement("div");t.setAttribute("id","todays_forecast_container"),document.getElementById("content").appendChild(t);const n=document.createElement("div");n.setAttribute("id","todays_temperature_container"),t.appendChild(n);const i=document.createElement("img");i.src="http://openweathermap.org/img/wn/"+e.icon+"@2x.png",i.setAttribute("id","todays_weather_icon"),t.appendChild(i);const o=document.createElement("div");o.innerHTML=e.temp+"°",o.setAttribute("id","current_temp"),n.appendChild(o);const c=document.createElement("div");c.innerHTML="Feels like:\n"+e.feels_like+"°",c.setAttribute("id","feels_like"),n.appendChild(c);const a=document.createElement("div");a.innerHTML="Humidity:\n"+e.humidity+"%",a.setAttribute("id","humidity"),n.appendChild(a);const d=document.createElement("div");d.setAttribute("id","todays_high"),d.innerHTML="H: "+e.high+"°",n.appendChild(d);const l=document.createElement("div");l.setAttribute("id","todays_low"),l.innerHTML="L: "+e.low+"°",n.appendChild(l)}(a.current),function(e){const t=document.createElement("div");t.setAttribute("id","hourly_forecast_container"),document.getElementById("content").appendChild(t),function(e,t){for(let n=0;n<25;n+=1){const i=document.createElement("div");i.setAttribute("class","hourly_forecast"),t.appendChild(i);const o=document.createElement("div");o.innerHTML=(e[n].time+e.timezone_offset)/3600%24,o.setAttribute("class","hour"),i.appendChild(o);const c=document.createElement("img");c.src="http://openweathermap.org/img/wn/"+e[n].icon+"@2x.png",c.setAttribute("class","hourly_icon"),i.appendChild(c);const a=document.createElement("div");if(a.innerHTML=e[n].temp+"°",a.setAttribute("class","hourly_temp"),i.appendChild(a),e[n].chance_of_rain>0){const t=document.createElement("div");t.innerHTML=Math.round(100*e[n].chance_of_rain)+"%",t.setAttribute("class","hourly_chance_of_rain"),i.appendChild(t)}}}(e,t)}(a.hourly),function(e){const t=document.createElement("div");t.setAttribute("id","daily_forecast_container"),document.getElementById("content").appendChild(t),function(e,t){for(let o=1;o<8;o+=1){const c=document.createElement("div");c.setAttribute("class","day_container"),t.appendChild(c);const a=document.createElement("div");a.setAttribute("class","day_name"),a.innerHTML=(n=e[o].time,i=e.timezone_offset,new Date(1e3*n+1e3*i).toLocaleString("en-US",{weekday:"long"})),c.appendChild(a);const d=document.createElement("img");d.src="http://openweathermap.org/img/wn/"+e[o].icon+"@2x.png",d.setAttribute("class","daily_weather_icon"),c.appendChild(d);const l=document.createElement("div");l.setAttribute("class","max_temp"),l.innerHTML="H: "+e[o].high+"°",c.appendChild(l);const r=document.createElement("div");if(r.setAttribute("class","min_temp"),r.innerHTML="L: "+e[o].low+"°",c.appendChild(r),e[o].chance_of_rain>0){const t=document.createElement("div");t.setAttribute("class","daily_precip_prob"),t.innerHTML=Math.round(100*e[o].chance_of_rain)+"%",c.appendChild(t)}}var n,i}(e,t)}(a.daily)}catch(e){console.log(e)}var o}function o(e,t,n){"F"===e?(t.style.opacity=1,n.style.opacity=.4):(n.style.opacity=1,t.style.opacity=.4)}function c(){const e=document.getElementById("content");for(;e.childNodes.length>1;)e.removeChild(e.lastChild)}function a(e){localStorage.setItem("scale",e)}function d(e){return Math.round(1.8*(e-273.15)+32)}function l(e){return Math.round(e-273.15)}!function(){const e=document.getElementById("content"),t=document.createElement("div");t.setAttribute("id","top_bar"),e.appendChild(t);const n=document.createElement("input");n.setAttribute("id","location_input");const r=document.createElement("button");r.setAttribute("id","submit_button"),r.innerHTML="Submit",r.addEventListener("click",(()=>{c(),"F"===localStorage.getItem("scale")?i(d):i(l)}));const s=document.createElement("button");s.setAttribute("id","fahrenheit"),s.innerHTML="F";const u=document.createElement("button");u.setAttribute("id","celsius"),u.innerHTML="C",s.addEventListener("click",(()=>{a("F"),o("F",s,u),c(),i(d)})),u.addEventListener("click",(()=>{a("C"),o("C",s,u),c(),i(l)})),t.appendChild(u),t.appendChild(s),t.appendChild(r),t.appendChild(n)}(),function(){const e=document.getElementById("location_input"),t=localStorage.getItem("location"),n=localStorage.getItem("scale");null==n&&a("F"),o(n,document.getElementById("fahrenheit"),document.getElementById("celsius")),null!=t?(e.value=t,i("F"===n?d:l)):e.placeholder="Enter location here"}()})();